<div class="login-container">
    <div class="login-form">
        <h2 class="mb-0">Recon & Settlement</h2>
        <h2 class="mt-0">Task Planning</h2>
        <h2>Reset Password</h2>

        <form #resetForm="ngForm" (ngSubmit)="resetPassword()">
            <!-- New Password -->
            <div class="form-group password-group">
                <label for="newPassword">New Password</label>
                <div class="password-wrapper">
                    <input [type]="showNewPassword ? 'text' : 'password'" id="newPassword" name="newPassword"
                        [(ngModel)]="newPassword" required #newPassRef="ngModel" minlength="8"
                        pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[.@$])[A-Za-z0-9.@$]{8,}$" />
                    <span class="toggle" (click)="showNewPassword = !showNewPassword">
                        {{ showNewPassword ? 'üôà' : 'üëÅÔ∏è' }}
                    </span>
                </div>
                @if(newPassRef.invalid && newPassRef.touched){
                <div class="error">
                    Password must be 8+ chars, include upper, lower, number, and one of
                    (@, $, &, %).
                </div>
                }
            </div>

            <!-- Confirm Password -->
            <div class="form-group password-group">
                <label for="confirmPassword">Confirm Password</label>
                <div class="password-wrapper">
                    <input [type]="showConfirmPassword ? 'text' : 'password'" id="confirmPassword"
                        name="confirmPassword" [(ngModel)]="confirmPassword" required #confirmPassRef="ngModel" />
                    <span class="toggle" (click)="showConfirmPassword = !showConfirmPassword">
                        {{ showConfirmPassword ? 'üôà' : 'üëÅÔ∏è' }}
                    </span>
                </div>
                @if(confirmPassRef.touched && confirmPassword !== newPassword){
                <div class="error">Confirm Passwords do not match with New Password.</div>
                }
            </div>

            <!-- Submit -->
            <button type="submit" [disabled]="resetForm.invalid || confirmPassword !== newPassword">
                <strong>Reset Password</strong>
            </button>
        </form>

        <div class="back-to-login">
            <a [href]="loginPath">Back to Login</a>
        </div>
    </div>
</div>

@if(isLoading){
<div class="loader-overlay">
    <div class="spinner-border text-primary" role="status"></div>
</div>
}